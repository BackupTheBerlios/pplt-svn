CPPFLAGS = @CPPFLAGS@
LDFLAGS  = @LDFLAGS@  
LIBS     = @LIBS@ -llog4cplus
CXX      = @CXX@

OBJS = cConnection.o cDisposable.o cFloatConnection.o cInnerModule.o cIntegerConnection.o cModule.o cObject.o cSequenceConnection.o cStreamConnection.o cStreamSymbol.o cSymbol.o cValueConnection.o Logging.o LogOutputter.o Exceptions.o Portability.o soModuleLoader.o


all: $(OBJS)
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) $(DEFS) $(LDFLAGS) $(LIBS) -shared -o libppltcore.so.2.0.0 $(OBJS)
	if !(test -e libppltcore.so.2); then ln -s libppltcore.so.2.0.0 libppltcore.so.2; fi
	if !(test -e libppltcore.so);   then ln -s libppltcore.so.2     libppltcore.so;   fi

clean:
	rm -f libppltcore.so libppltcore.so.2 libppltcore.so.2.0.0
	rm -f *.o

distclean: clean
	rm -f Makefile 

install: all
	install -D libppltcore.so.2.0.0 /usr/lib/libppltcore.so.2.0.0
	if !(test -e /usr/lib/libppltcore.so.2); then ln -s /usr/lib/libppltcore.so.2.0.0 /usr/lib/libppltcore.so.2; fi
	if !(test -e /usr/lib/libppltcore.so); then ln -s /usr/lib/libppltcore.so.2 /usr/lib/libppltcore.so; fi
	
