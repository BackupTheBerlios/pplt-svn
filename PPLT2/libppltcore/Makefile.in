
CPPFLAGS    = @CPPFLAGS@
LDFLAGS     = @LDFLAGS@  
LIBS        = @LIBS@ 
CXX         = @CXX@
AR          = ar
CONFIGFLAGS = @DEFS@
srcdir      = @srcdir@
top_srcdir  = @top_srcdir@
VPATH       = @srcdir@
prefix      = @prefix@
exec_prefix = @exec_prefix@
bindir      = @bindir@
libdir      = @libdir@
incdir      = @includedir@/pplt/


OBJS = cConnection.o cDisposable.o cFloatConnection.o cInnerModule.o cIntegerConnection.o cModule.o cObject.o cSequenceConnection.o cStreamConnection.o cStreamSymbol.o cSymbol.o cValueConnection.o Logging.o LogOutputter.o Exceptions.o Portability.o soModuleLoader.o pyModuleLoader.o


all: $(OBJS)
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) $(DEFS) $(LDFLAGS) $(LIBS) -shared -o libppltcore.so.2.0.0 $(OBJS)
	if !(test -e libppltcore.so.2); then ln -s libppltcore.so.2.0.0 libppltcore.so.2; fi
	if !(test -e libppltcore.so);   then ln -s libppltcore.so.2     libppltcore.so;   fi

clean:
	rm -f libppltcore.so libppltcore.so.2 libppltcore.so.2.0.0
	rm -f *.o

distclean: clean
	rm -f Makefile 
	rm -f config.h

install: all
	install -D libppltcore.so.2.0.0 $(libdir)/libppltcore.so.2.0.0
	if !(test -e $(libdir)/libppltcore.so.2); then ln -s $(libdir)/libppltcore.so.2.0.0 $(libdir)/libppltcore.so.2; fi
	if !(test -e $(libdir)/libppltcore.so); then ln -s $(libdir)/libppltcore.so.2 $(libdir)/libppltcore.so; fi
	if !(test -e $(incdir)); then mkdir -p $(incdir); fi
	install -D *.h $(incdir)    
